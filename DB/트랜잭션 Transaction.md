## 💡 **트랜잭션(Transaction)**

데이터베이스의 **상태를 변화**시키기 해서 수행하는 **작업의 단위**

<br>

### 상태를 변화시키는 것

SQL문 `SELECT, INSERT, UPDATE, DELETE` 을 이용하여 데이터베이스를 접근 하는 것을 의미한다.

하나의 처리를 여러 단계로 다루는 기능

### 작업 단위

많은 SQL 명령문들을 사람이 정하는 기준에 따라 정하는 것!! 단순히 SQL문 한문장이 아니다.

```jsx
(예시상황)
게시판 사용자는 게시글을 작성하고, 작성 버튼을 누른다. 
게시글을 작성하고 게시판에 돌아왔을때, 자신이 작성한 글이 포함된 업데이트된 게시판을 보게 된다.

* INSERT 문 + SELECT 문
사용자가 올리기 버튼을 누른다. : INSERT 문을 사용하여 사용자가 입력한 게시글의 데이터를 옮긴다. 
작성한 글을 포함하여 게시판을 업데이트한다. : SELECT 문으로 최신 정보로 게시판을 조회한다.
```

<br>

## 💡 **트랜잭션 연산**

### **Commit**

- 한개의 트랜잭션에 대한 작업이 성공적으로 끝나서 실행 결과를 데이터베이스에 반영하는 것
- 하나의 처리를 Commit 명령어를 수행하기 전에 마지막으로 한번 더 확인할 수 있다.

### **Rollback**

- 반영하기 전으로 되돌리는 것
- 하나의 트랜잭션 처리가 비정상적으로 종료되어 데이터베이스의 일관성을 깨뜨렸을 때, 이 트랜잭션의 일부가 정상적으로 처리되었더라도 트랜잭션의 원자성을 구현하기 위해 트랜잭션이 행한 모든 연산을 취소(Undo)한다.
- Rollback시에는 해당 트랜잭션을 재시작하거나 폐기한다.

```sql
BEGIN TRAN --트랜잭션 시작

ROLLBACK TRAN --트랜잭션 이전상태로 ROLL BACK

COMMIT TRAN --트랜잭션 완료
```

<br>

## **트랜잭션의 상태**

**활동(Active) :** 트랜잭션이 실행중인 상태

**실패(Failed) :** 트랜잭션 실행에 오류가 발생하여 중단된 상태

**철회(Aborted) :** 트랜잭션이 비정상적으로 종료되어 Rollback 연산을 수행한 상태

**부분 완료(Partially Committed) :** 트랜잭션의 마지막 연산까지 실행했지만, Commit 연산이 실행되기 직전의 상태

**완료(Committed) :** 트랜잭션이 성공적으로 종료되어 Commit 연산을 실행한 후의 상태